Move exclusions up before reading file/dir in _walk_relative_paths.
erform exclusion checks before file access attempts. This will prevent unnecessary warnings and IO operations on paths that are not relevant to the operation.